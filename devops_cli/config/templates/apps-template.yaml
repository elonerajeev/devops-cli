# Applications Configuration Template
# =====================================
# Define your applications for log viewing, health checks, and monitoring.
#
# Usage:
#   1. Copy this file and fill in your actual values
#   2. Run: devops admin import --file apps.yaml
#
# CONFIG MANAGEMENT STRATEGIES:
# =============================
# You can choose between LOCAL or CENTRALIZED config management:
#
# 1. LOCAL SECRETS MANAGEMENT (Simple):
#    - Store secrets in local files or environment variables
#    - Good for: Development, small teams, simple setups
#    - Example: key: ~/.ssh/id_rsa or key: ${MY_LOCAL_ENV_VAR}
#
# 2. CENTRALIZED CONFIG MANAGEMENT (Advanced):
#    - Store secrets in AWS Secrets Manager or similar
#    - Good for: Production, teams, compliance requirements
#    - Example: key: ${AWS_SECRET:devops/ssh-keys/prod}
#
# SECRETS REFERENCE SYNTAX:
#   ${ENV_VAR_NAME}           - Read from environment variable (local)
#   ${AWS_SECRET:secret-name} - Read from AWS Secrets Manager (centralized)
#   ${GITHUB_SECRET:name}     - Read from GitHub Secrets (CI/CD only)
#   ~/path/to/file            - Local file path
#   /absolute/path/to/file    - Absolute file path
#

organization: YourCompany

apps:
  # CloudWatch Log Group Example (Custom)
  api-service:
    name: api-service
    type: custom
    description: Main API Service
    logs:
      type: cloudwatch
      log_group: /apps/prod/api-service
      region: ap-south-1
    health:
      type: http
      url: https://api.example.com/health
      expected_status: 200
    aws_role: prod-readonly
    teams:
      - backend
      - devops

  # Lambda Function Example
  image-processor:
    name: image-processor
    type: lambda
    description: Image Processing Lambda
    lambda:
      function_name: image-processor-prod
      region: ap-south-1
    logs:
      type: cloudwatch
      log_group: /aws/lambda/image-processor-prod
    teams:
      - backend

  # Kubernetes Service Example (via CloudWatch)
  auth-worker:
    name: auth-worker
    type: kubernetes
    description: Auth Worker in K8s
    kubernetes:
      namespace: production
      deployment: auth-worker
    logs:
      type: cloudwatch
      log_group: /aws/containerinsights/prod-cluster/application
    health:
      type: http
      url: http://auth-worker.prod.svc.cluster.local/health
    teams:
      - auth-team

# Supported Types:
#   type: lambda | kubernetes | docker | custom
#   logs.type: cloudwatch
#   health.type: http | tcp | command | none